{
  "version": "v2.2",
  "created_at": "2025-11-15T02:00:00.000Z",
  "description": "Production-grade cognitive rules matching actual SIVA tool implementations (Sprint 22)",
  "changelog": {
    "v2.2": "Increased large company points (18), added unknown/consulting industry penalty (Sprint 22 tuning iteration 2)",
    "v2.1": "Added large company scoring, medium salary + UAE combo, domain verification (Sprint 22 tuning)",
    "v2.0": "Complete rewrite to match production tool signatures and logic patterns",
    "v1.0": "Initial educational/demo rules (Sprint 21)"
  },
  "rules": {
    "evaluate_company_quality": {
      "type": "additive_scoring",
      "description": "Score company fit using additive scoring with computed variables and edge cases",
      "base_score": 0,
      "base_confidence": 1.0,
      "output_range": [0, 100],

      "computed_variables": {
        "salary_level": {
          "type": "conditional",
          "description": "Infer salary level from salary indicators",
          "branches": [
            {
              "type": "if",
              "condition": {
                "salary_indicators.salary_level": {"eq": "high"}
              },
              "value": "high"
            },
            {
              "type": "elif",
              "condition": {
                "salary_indicators.salary_level": {"eq": "medium"}
              },
              "value": "medium"
            },
            {
              "type": "elif",
              "condition": {
                "salary_indicators.salary_level": {"eq": "low"}
              },
              "value": "low"
            },
            {
              "type": "elif",
              "condition": {
                "salary_indicators.avg_salary": {"gte": 15000}
              },
              "value": "high"
            },
            {
              "type": "elif",
              "condition": {
                "salary_indicators.avg_salary": {"gte": 8000}
              },
              "value": "medium"
            },
            {
              "type": "elif",
              "condition": {
                "salary_indicators.avg_salary": {"gt": 0}
              },
              "value": "low"
            },
            {
              "type": "else",
              "value": "unknown"
            }
          ]
        },

        "uae_presence": {
          "type": "multi_condition",
          "description": "Calculate UAE presence strength from multiple signals",
          "logic": "COUNT",
          "conditions": [
            {"uae_signals.has_ae_domain": {"eq": true}},
            {"uae_signals.has_uae_address": {"eq": true}}
          ],
          "values": {
            "2": "strong",
            "1": "moderate",
            "0": "weak"
          },
          "default": "none"
        }
      },

      "scoring_factors": [
        {
          "name": "Salary & UAE Presence",
          "condition": {
            "salary_level": {"eq": "high"},
            "uae_presence": {"eq": "strong"}
          },
          "points": 40,
          "explanation": "High salary level with strong UAE presence - excellent quality indicator",
          "key_factor": "HIGH_SALARY_UAE_VERIFIED"
        },
        {
          "name": "Salary Level",
          "condition": {
            "salary_level": {"eq": "high"},
            "uae_presence": {"in": ["moderate", "weak", "none"]}
          },
          "points": 25,
          "explanation": "High salary level without confirmed UAE presence",
          "confidence_adjustment": -0.1,
          "key_factor": "HIGH_SALARY"
        },
        {
          "name": "UAE Presence",
          "condition": {
            "uae_presence": {"eq": "strong"},
            "salary_level": {"in": ["medium", "low", "unknown"]}
          },
          "points": 20,
          "explanation": "Strong UAE presence confirmed",
          "key_factor": "UAE_VERIFIED"
        },
        {
          "name": "Company Size - Sweet Spot",
          "condition": {
            "size": {"gte": 50},
            "size": {"lte": 500}
          },
          "points": 20,
          "explanation_template": "{size} employees - ideal sweet spot (50-500)",
          "key_factor": "SIZE_OPTIMAL"
        },
        {
          "name": "Company Size - Scaleup/Midsize",
          "condition": {
            "size_bucket": {"in": ["scaleup", "midsize"]}
          },
          "points": 15,
          "explanation_template": "{size_bucket} category - good fit"
        },
        {
          "name": "Company Size - Small",
          "condition": {
            "size": {"gt": 0},
            "size": {"lt": 50}
          },
          "points": 10,
          "explanation_template": "{size} employees - small but acceptable"
        },
        {
          "name": "Company Size - Enterprise",
          "condition": {
            "size_bucket": {"eq": "enterprise"}
          },
          "points": 5,
          "explanation": "Enterprise size - may have complex processes",
          "confidence_adjustment": -0.05
        },
        {
          "name": "Company Size - Large (500+)",
          "condition": {
            "size": {"gt": 500}
          },
          "points": 18,
          "explanation_template": "{size} employees - large organization",
          "confidence_adjustment": -0.05,
          "key_factor": "SIZE_LARGE"
        },
        {
          "name": "Medium Salary + UAE Presence",
          "condition": {
            "salary_level": {"eq": "medium"},
            "uae_presence": {"in": ["strong", "moderate"]}
          },
          "points": 15,
          "explanation": "Medium salary with UAE presence - acceptable quality",
          "confidence_adjustment": -0.05,
          "key_factor": "MEDIUM_SALARY_UAE"
        },
        {
          "name": "Industry - High Value",
          "condition": {
            "industry": {"matches_any": ["FinTech", "Technology", "tech", "Healthcare", "Health Tech"]}
          },
          "points": 15,
          "explanation_template": "{industry} - high-value industry with quality hiring needs",
          "key_factor": "HIGH_VALUE_INDUSTRY"
        },
        {
          "name": "Domain - UAE Verified",
          "condition": {
            "domain": {"contains": ".ae"}
          },
          "points": 10,
          "explanation": "UAE domain (.ae) verified",
          "key_factor": "DOMAIN_VERIFIED"
        }
      ],

      "edge_case_adjustments": [
        {
          "name": "ENTERPRISE_BRAND_EXCLUSION",
          "condition": {
            "company_name": {"matches_any": ["Etihad", "Emirates", "ADNOC", "Emaar", "DP World"]}
          },
          "multiplier": 0.1,
          "confidence_override": 0.95,
          "explanation": "Major enterprise brand - auto-skip (×0.1)"
        },
        {
          "name": "GOVERNMENT_SECTOR_EXCLUSION",
          "condition": {
            "sector": {"contains": "government"}
          },
          "multiplier": 0.05,
          "confidence_override": 0.95,
          "explanation": "Government sector - auto-skip (×0.05)"
        },
        {
          "name": "UNKNOWN_INDUSTRY_PENALTY",
          "condition": {
            "industry": {"in": ["Unknown", "Consulting"]}
          },
          "multiplier": 0.5,
          "explanation": "Unknown/Consulting industry - reduced quality (×0.5)"
        },
        {
          "name": "FREE_ZONE_BONUS",
          "condition": {
            "license_type": {"contains": "free zone"}
          },
          "multiplier": 1.3,
          "explanation": "Free Zone license - 30% quality bonus (×1.3)"
        }
      ],

      "confidence_adjustments": [
        {
          "condition": {
            "salary_indicators.salary_level": {"eq": null},
            "salary_indicators.avg_salary": {"eq": null}
          },
          "value": -0.15
        },
        {
          "condition": {
            "uae_signals.has_ae_domain": {"eq": false},
            "uae_signals.has_uae_address": {"eq": false}
          },
          "value": -0.15
        },
        {
          "condition": {
            "size": {"eq": null},
            "size_bucket": {"eq": null}
          },
          "value": -0.1
        }
      ],

      "reasoning_template": "Company quality score based on {uae_presence} UAE presence, {salary_level} salary level, and {industry} industry"
    }
  }
}
